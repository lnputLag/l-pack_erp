<UserControl x:Class="Client.Interfaces.Production.ScalesShredderKsh.Position"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Client.Interfaces.Production.ScalesShredderKsh"
             mc:Ignorable="d" 
             d:DesignHeight="75" d:DesignWidth="270"
             Style="{DynamicResource UserControlCanvas}" 
             Background="Transparent"
             >
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/l-pack_erp;component/Assets/Styles/Common.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <Style x:Key="LongFormFieldCombo" BasedOn="{StaticResource FormFieldCombo}" TargetType="{x:Type ComboBox}">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type ComboBox}">
                            <Border Name="border" CornerRadius="0" BorderBrush="#FFadadad" BorderThickness="1,1,1,1" Margin="0,0,5,0" RenderOptions.EdgeMode="Aliased" Height="32">
                                <Grid Margin="0,0,0,0"  >
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition/>
                                        <ColumnDefinition MaxWidth="30"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBox Name="PART_EditableTextBox" 
                                Focusable="false"  
                                BorderThickness="0,0,0,0" 
                                Padding="3,3,0,0" 
                                Height="{TemplateBinding Height}" 
                                MinHeight="32"                                      
                                Margin="0" 
                                     
                            />

                                    <ToggleButton Grid.Column="1" 
                                Name="SelectButton"
                                Margin="0,0,0,0" 
                                Height="31" Width="31"
                                Focusable="false" 
                                IsChecked="{Binding Path=IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" 
                                ClickMode="Press"                            
                                          BorderThickness="0"
                            >
                                        <Image Style="{DynamicResource ChevronDownImage}" Opacity="0.4"  Margin="-1,0,0,0" Width="31" Height="31"/>
                                    </ToggleButton>

                                    <ContentPresenter Name="ContentSite"
                                IsHitTestVisible="True"    
                                              
                                Content="{TemplateBinding SelectionBoxItem}"
                                ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                VerticalAlignment="Center"
                                HorizontalAlignment="Left"
                                Margin="5,0,0,0"
                            />
                                    <Popup Name="Popup"
                                Placement="Bottom"
                                   HorizontalOffset="-1"
                                IsOpen="{TemplateBinding IsDropDownOpen}"
                                AllowsTransparency="True" 
                                Focusable="False"
                                PopupAnimation="Slide"                               
                                Margin="-1,0,0,0"
                            >
                                        <Grid Name="DropDown"                                            
                                    MinWidth="{TemplateBinding ActualWidth}"                                  
                                    MaxHeight="500"
                                    Margin="0,0,0,0"                                    
                                >
                                            <!--BorderBrush="#FFAdAdAd" -->
                                            <Border 
                                        x:Name="DropDownBorder"                                    
                                        CornerRadius="0,0,0,0"
                                        Background="#ffffffff"
                                        BorderBrush="#FFAdAdAd" 
                                        BorderThickness="1,1,1,1"                                        
                                    />
                                            <ScrollViewer Margin="0,0,0,0" >
                                                <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Contained" />
                                            </ScrollViewer>
                                        </Grid>
                                    </Popup>
                                </Grid>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter  Property="Background"  Value="Green"></Setter>
                                    <Setter  Property="BorderBrush" Value="Green"></Setter>
                                </Trigger>
                                <Trigger Property="Validation.HasError" Value="True">
                                    <Setter TargetName="border" Property="BorderBrush" Value="#ffDD414A"></Setter>
                                    <Setter TargetName="border" Property="BorderThickness" Value="1"></Setter>
                                    <Setter Property="Validation.ErrorTemplate" Value="{StaticResource ComboBoxErrorStyle}"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ResourceDictionary>
    </UserControl.Resources>
        
    
    <Grid Margin="5 0 5 0">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="2*"/>
        </Grid.ColumnDefinitions>

        <StackPanel Grid.Column="0" VerticalAlignment="Center" Margin="0 0 5 0">
            <Label Content="Ряд:"   Style="{DynamicResource TouchFormLabel}" HorizontalAlignment="Right" Margin="0 2 0 0"/>
            <Label Content="Место:" Style="{DynamicResource TouchFormLabel}" HorizontalAlignment="Right" Margin="0 5 0 0"/>
        </StackPanel>

        <StackPanel Grid.Column="1" VerticalAlignment="Center">
            <ComboBox x:Name="Sklad"    Style="{DynamicResource LongFormFieldCombo}" FontSize="24" FontWeight="SemiBold" Margin="0 2 0 0" SelectionChanged="Sklad_SelectionChanged"/>
            <ComboBox x:Name="Place" Style="{DynamicResource LongFormFieldCombo}" FontSize="24" FontWeight="SemiBold" Margin="0 5 0 0" SelectionChanged="Place_SelectionChanged"/>
        </StackPanel>

    </Grid>
</UserControl>
